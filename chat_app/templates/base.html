<!DOCTYPE html>
<html>
<head>
    <title>{% block title %}AI Chat{% endblock %}</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
    <link rel="icon" href="{{ url_for('static', filename='favicon.ico') }}" type="image/x-icon">
    <link rel="shortcut icon" href="{{ url_for('static', filename='favicon.ico') }}" type="image/x-icon">
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
    <!-- KaTeX CSS -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.css">
    <!-- KaTeX JS -->
    <script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.js"></script>
    <script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/contrib/auto-render.min.js"></script>
    {% block head %}{% endblock %}
</head>
<body>
    <nav class="main-nav">
        <div class="nav-container">
            <div class="nav-logo">
                <a href="{{ url_for('chat') }}">AI Chat</a>
            </div>
            <div class="nav-links">
                {% if current_user.is_authenticated %}
                    <a href="{{ url_for('chat') }}" class="nav-link">聊天</a>
                    <a href="{{ url_for('subscription_page') }}" class="nav-link">订阅服务</a>
                    <span class="user-name">{{ current_user.username }}</span>
                    <a href="{{ url_for('logout') }}" class="nav-link logout">登出</a>
                {% else %}
                    <a href="{{ url_for('login') }}" class="nav-link">登录</a>
                    <a href="{{ url_for('register') }}" class="nav-link">注册</a>
                {% endif %}
            </div>
        </div>
    </nav>

    <div class="main-container">
        {% block content %}{% endblock %}
    </div>

    {% block scripts %}{% endblock %}
</body>
</html>